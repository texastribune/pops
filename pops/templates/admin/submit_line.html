{% load i18n %}

<div class="subnav">
  {% if show_delete_link %}
    <a href="delete/" class="deletelink btn btn-danger">
      <i class="icon-trash icon-white"></i>
      {% trans "Delete" %}
    </a>
  {% endif %}

  <div class="actions pull-right">
    <ul>
      <li class="action-item">
        <div id="actions-right-alt" class="btn-group pull-left"></div>
      </li>

      <li class="action-item">
        <div id="submitChangeFormSaves" class="btn-group">
          <input type="submit" value="âœ“ {% trans buttons.primary_button.text %}"
              class="default btn btn-success" name="{{ buttons.primary_button.key }}"
              {{ onclick_attrib }}>

          {% if buttons.secondary_buttons %}
            <button class="btn btn-success dropdown-toggle" data-toggle="dropdown">
              <span class="caret"></span>
            </button>
          {% endif %}

          <ul class="dropdown-menu">
            {% for button in buttons.secondary_buttons %}
              <li>
                <a href="javascript:void(0);" data-name="{{ button.key }}">
                  {% trans button.text %}
                </a>
              </li>
            {% endfor %}
          </ul>
        </div>
      </li>
    </ul>
  </div>

  <div style="clear:both;"></div>
</div>

{% comment %}
Shiv to take object actions and move them to a prettier place.
{% endcomment %}
<script>
  (function($){
    // Try to use efficient selectors since this JS isn't deferred.
    var $objectTools = $('#content-main > ul.object-tools'),
        $container = $('#actions-right-alt'),
        // Icons to attach to special buttons. Keep the trailing white space.
        icons = {
          historylink: '<i class="icon-time"></i> ',
          viewsitelink: '<i class="icon-share-alt"></i> '
        };

    if (!$objectTools.length) { return; }

    $objectTools.hide().find('a').each(function(){
      var $el = $(this).clone(),
          icon = icons[$el.attr('class')];
      if (icon) {
        $el.prepend(icon);
      }
      $el.addClass('btn').appendTo($container);
    })

  })(window.django.jQuery);
</script>
